openapi: 3.0.0
info:
  contact:
    email: opendata@mit.gov.it
    name: Ministero Infrastrutture e Trasporti
    url: http://opencantieri.mit.gov.it/crediti
  description: |
    #### Documentazione Il portale dei dati aperti dati.mit.gov.it è realizzato e manutenuto dal Ministero delle infrastrutture e dei trasporti con il coordinamento della Direzione generale per i Sistemi Informativi e Statistici.
    Tramite queste API è possibile ricercare e visualizzare gli open data nazionali presenti sul portale.

    #### Note
    Per ulteriori informazioni si veda la pagina [crediti di opencantieri](http://opencantieri.mit.gov.it/crediti)
    #### Informazioni tecniche ed esempi
    Queste API non sono strettamente REST e **non utilizzano i metodi PUT e DELETE**, ma solamente i metodi GET e POST.
    ##### Autenticazione
    Le API esposte non richiedono autenticazione e permettono solamente il download dei dati.
    ##### Esempi Query di esempio:

      * elenca i dataset
    ``` curl "http://dati.mit.gov.it/catalog/api/3/action/package_list?limit=5" ```

      * mostra il dataset __abitazioni__

    ``` curl "http://dati.mit.gov.it/catalog/api/3/action/package_show?id=digiroa" ```
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://www.mit.gov.it/note-legali
  title: Opendata MIT
  version: '3'
  x-api-id: 28a40681-4c28-45c9-9bda-7e55d1d6ec68
  x-audience:
  - public
  x-summary: API per ricercare e visualizzare gli open data del Ministero delle Infrastrutture
    e dei Trasporti.
servers:
- url: http://dati.mit.gov.it/catalog/api/3/action
tags:
- description: Operations available to all citizens
  name: public
paths:
  /organization_list:
    get:
      description: |
        List or search all datasets
      operationId: listOrgs
      parameters:
      - description: |
          sorting of the search results. Optional. Default: “name asc” string of field name and sort-order. The allowed fields are ‘name’, ‘package_count’ and ‘title’
        in: query
        name: sort
        required: false
        schema:
          default: name asc
          type: string
      - description: |
          if given, the list of organizations will be broken into pages of at most limit organizations per page and only one page will be returned at a time (optional)
        in: query
        name: limit
        schema:
          format: int32
          type: integer
      - description: |
          when limit is given, the offset to start returning organizations from
        in: query
        name: offset
        required: false
        schema:
          format: int32
          type: integer
      - description: |
          a list of names of the groups to return, if given only groups whose names are in this list will be returned (optional)
        in: query
        name: organizations
        required: false
        schema:
          type: string
      - description: |
          return group dictionaries instead of just names. Only core fields are returned - get some more using the include_* options. Returning a list of packages is too expensive, so the packages property for each group is deprecated, but there is a count of the packages in the package_count property. (optional, default: False)
        in: query
        name: all_fields
        required: false
        schema:
          type: boolean
      - description: |
          if all_fields, include the full package_count (optional, default: True)
        in: query
        name: include_dataset_count
        schema:
          default: true
          type: boolean
      - description: |
          if all_fields, include the organization extra fields (optional, default: False)
        in: query
        name: include_extras
        schema:
          default: false
          type: boolean
      - description: |
          if all_fields, include the organization tags (optional, default: False)
        in: query
        name: include_tags
        schema:
          default: false
          type: boolean
      - description: |
          if all_fields, include the organizations the organizations are in (optional, default: False)
        in: query
        name: include_groups
        schema:
          default: false
          type: boolean
      - description: |
          if all_fields, include the organization users (optional, default: False).
        in: query
        name: include_users
        schema:
          default: false
          type: boolean
      responses:
        '200':
          $ref: '#/components/responses/CkanResponse'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
        default:
          $ref: '#/components/responses/default'
      summary: List all groups within given parameters
      tags:
      - public
  /package_list:
    get:
      description: |
        List or search all datasets
      operationId: listInventory
      parameters:
      - description: when limit is given, the offset to start returning packages from
        in: query
        name: offset
        required: false
        schema:
          type: integer
      - description: if given, the list of datasets will be broken into pages of at
          most limit datasets per page and only one page will be returned at a time
          (optional)
        in: query
        name: limit
        schema:
          format: int32
          type: integer
      responses:
        '200':
          $ref: '#/components/responses/CkanResponse'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
        default:
          $ref: '#/components/responses/default'
      summary: List all datasets within given limit
      tags:
      - public
  /package_search:
    get:
      description: |
        List or search all datasets
      operationId: searchInventory
      parameters:
      - description: the solr query. For example ``name:pdf-testi``
        in: query
        name: q
        required: false
        schema:
          default: '*:*'
          type: string
      - description: |
          any filter queries to apply. Note: +site_id:{ckan_site_id} is added to this string prior to the query being executed.
        in: query
        name: fq
        schema:
          type: string
      - description: |
          sorting of the search results. Optional. **Default: 'relevance asc, metadata_modified desc'**. As per the solr documentation, this is a comma-separated string of field names and sort-orderings.
        in: query
        name: sort
        required: false
        schema:
          default: relevance asc, metadata_modified desc
          type: string
      - description: the number of matching rows to return. There is a hard limit
          of 1000 datasets per query.
        in: query
        name: rows
        required: false
        schema:
          type: integer
      - description: the offset in the complete result for where the set of returned
          datasets should begin.
        in: query
        name: start
        schema:
          type: integer
      - description: if True, draft datasets will be included in the results. A user
          will only be returned their own draft datasets, and a sysadmin will be returned
          all draft datasets. Optional, the default is False.
        in: query
        name: include_drafts
        schema:
          default: false
          type: boolean
      responses:
        '200':
          $ref: '#/components/responses/CkanResponse'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '409':
          description: Conflict (can result e.g. from incorrectly formatted solr query)
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
        default:
          $ref: '#/components/responses/default'
      summary: Search among all datasets
      tags:
      - public
  /package_show:
    get:
      description: |
        List or search all datasets
      operationId: showInventory
      parameters:
      - description: the id or name of the dataset
        in: query
        name: id
        required: true
        schema:
          type: string
      - description: |
          add tracking information to dataset and resources (default: False)
        in: query
        name: include_tracking
        schema:
          default: false
          type: boolean
      responses:
        '200':
          $ref: '#/components/responses/CkanResponse'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
        default:
          $ref: '#/components/responses/default'
      summary: Get details of one package
      tags:
      - public
  /user_list:
    get:
      description: |
        List or search all datasets
      operationId: listUsers
      parameters:
      - description: |
          sorting of the search results. Optional. Default: “name asc” string of field name and sort-order. The allowed fields are ‘name’, ‘package_count’ and ‘title’
        in: query
        name: sort
        required: false
        schema:
          default: name asc
          type: string
      - description: |
          if given, the list of organizations will be broken into pages of at most limit organizations per page and only one page will be returned at a time (optional)
        in: query
        name: limit
        schema:
          format: int32
          type: integer
      - description: |
          when limit is given, the offset to start returning organizations from
        in: query
        name: offset
        required: false
        schema:
          format: int32
          type: integer
      - description: |
          a list of names of the groups to return, if given only groups whose names are in this list will be returned (optional)
        in: query
        name: organizations
        required: false
        schema:
          type: string
      - description: |
          return group dictionaries instead of just names. Only core fields are returned
          - get some more using the include_* options. Returning a list of packages is too
          expensive, so the packages property for each group is deprecated, but there is a
          count of the packages in the package_count property. (optional, default: False)
        in: query
        name: all_fields
        required: false
        schema:
          type: boolean
      - description: |
          if all_fields, include the full package_count (optional, default: True)
        in: query
        name: include_dataset_count
        schema:
          default: true
          type: boolean
      - description: |
          if all_fields, include the organization extra fields (optional, default: False)
        in: query
        name: include_extras
        schema:
          default: false
          type: boolean
      - description: |
          if all_fields, include the organization tags (optional, default: False)
        in: query
        name: include_tags
        schema:
          default: false
          type: boolean
      - description: |
          if all_fields, include the organizations the organizations are in (optional, default: False)
        in: query
        name: include_groups
        schema:
          default: false
          type: boolean
      - description: |
          if all_fields, include the organization users (optional, default: False).
        in: query
        name: include_users
        schema:
          default: false
          type: boolean
      responses:
        '400':
          $ref: '#/components/responses/400BadRequest'
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '503':
          $ref: '#/components/responses/503ServiceUnavailable'
        default:
          $ref: '#/components/responses/default'
        200:
          $ref: '#/components/responses/CkanResponse'
      summary: List all groups within given parameters
      tags:
      - consumers
components:
  headers:
    Retry-After:
      description: |-
        Retry contacting the endpoint *at least* after seconds.
        See https://tools.ietf.org/html/rfc7231#section-7.1.3
      schema:
        format: int32
        type: integer
    X-RateLimit-Limit:
      description: The number of allowed requests in the current period
      schema:
        format: int32
        type: integer
    X-RateLimit-Remaining:
      description: The number of remaining requests in the current period
      schema:
        format: int32
        type: integer
    X-RateLimit-Reset:
      description: The number of seconds left in the current period
      schema:
        format: int32
        type: integer
  responses:
    400BadRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CkanError'
      description: |
        Invalid input
    403Forbidden:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CkanError'
      description: |
        Missing authorization key
    409AlreadyExists:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CkanError'
      description: |
        Item already exists
    429TooManyRequests:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CkanError'
      description: Too Many Requests
      headers:
        Retry-After:
          $ref: '#/components/headers/Retry-After'
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
    503ServiceUnavailable:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CkanError'
      description: Service Unavailable
      headers:
        Retry-After:
          $ref: '#/components/headers/Retry-After'
    CkanResponse:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CkanReply'
      description: |
        Standard Ckan Reply. See http://docs.ckan.org/en/latest/api/index.html.
      headers:
        X-RateLimit-Limit:
          $ref: '#/components/headers/X-RateLimit-Limit'
        X-RateLimit-Remaining:
          $ref: '#/components/headers/X-RateLimit-Remaining'
        X-RateLimit-Reset:
          $ref: '#/components/headers/X-RateLimit-Reset'
    default:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CkanError'
      description: Unexpected error
  schemas:
    CkanError:
      properties:
        error:
          type: object
        help:
          format: url
          type: string
        result:
          anyOf:
          - type: object
          - type: array
        status:
          enum:
          - false
          type: boolean
        success:
          type: string
      required:
      - result
      - success
      - help
      - error
      type: object
    CkanReply:
      properties:
        error:
          type: object
        help:
          format: url
          type: string
        result:
          anyOf:
          - type: object
          - type: array
        status:
          enum:
          - true
          - false
          type: boolean
        success:
          type: string
      required:
      - result
      - success
      - help
      type: object
  securitySchemes:
    ckanapikey:
      in: header
      name: Authorization
      type: apiKey
